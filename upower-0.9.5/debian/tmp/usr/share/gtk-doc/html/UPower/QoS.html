<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>org.freedesktop.UPower.QoS</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
<link rel="home" href="index.html" title="UPower Reference Manual">
<link rel="up" href="ref-dbus.html" title="D-Bus API Reference">
<link rel="prev" href="Device.html" title="org.freedesktop.UPower.Device">
<link rel="next" href="libupower-glib.html" title="libupower-glib GObjects">
<meta name="generator" content="GTK-Doc V1.15 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="Device.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ref-dbus.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">UPower Reference Manual</th>
<td><a accesskey="n" href="libupower-glib.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#QoS.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#QoS.description" class="shortcut">Description</a>
                   | 
                  <a href="#QoS.implemented-interfaces" class="shortcut">Implemented Interfaces</a>
                   | 
                  <a href="#QoS.signals" class="shortcut">Signals</a>
</td></tr>
</table>
<div class="refentry" title="org.freedesktop.UPower.QoS">
<a name="QoS"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle">org.freedesktop.UPower.QoS</span></h2>
<p>org.freedesktop.UPower.QoS — QoS interface</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv" title="Methods">
<h2>Methods</h2>
<pre class="synopsis"><a class="link" href="QoS.html#QoS.SetMinimumLatency">SetMinimumLatency</a>  (in  's'            type,
                    in  'i'            value)
<a class="link" href="QoS.html#QoS.RequestLatency">RequestLatency</a>     (in  's'            type,
                    in  'i'            value,
                    in  'b'            persistent,
                    out 'u'            cookie)
<a class="link" href="QoS.html#QoS.CancelRequest">CancelRequest</a>      (in  's'            type,
                    in  'u'            cookie)
<a class="link" href="QoS.html#QoS.GetLatency">GetLatency</a>         (in  's'            type,
                    out 'i'            value)
<a class="link" href="QoS.html#QoS.GetLatencyRequests">GetLatencyRequests</a> (out 'a(uuusxbssi)' requests)
</pre>
</div>
<div class="refsect1" title="Signals">
<a name="id2797227"></a><h2>Signals</h2>
<pre class="synopsis"><a class="link" href="QoS.html#QoS::LatencyChanged">LatencyChanged</a>  ('s' type,
                 'i' value)
<a class="link" href="QoS.html#QoS::RequestsChanged">RequestsChanged</a> ()
</pre>
</div>
<div class="refsect1" title="Implemented Interfaces">
<a name="id2787784"></a><h2>Implemented Interfaces</h2>
<p>
    Objects implementing org.freedesktop.UPower.QoS also implements
    org.freedesktop.DBus.Introspectable,
    org.freedesktop.DBus.Properties
    </p>
</div>
<div class="refsect1" title="Description">
<a name="id2808285"></a><h2>Description</h2>
<p>
      
        </p>
<p>
          org.freedesktop.UPower.QoS is a DBus interface implimented
          by UPower.
          It allows applications to request latencies, for example a couple of seconds
          for an IM application, or a few hundred microseconds for a multiplayer game.
        </p>
<p>
        </p>
<p>
          Use cases:
        </p>
<p>
        
          
            </p>
<p>
              I want my IM application to request 0.5s latency for messages.
            </p>
<p>
            </p>
<p>
              I'm running an OpenGL simulation and want maximum performance,
              even when on battery power.
            </p>
<p>
            </p>
<p>
              I'm running an SQL server for a credit card company, and want the
              server to request low latency CPU and network as any delay costs money.
            </p>
<p>
            </p>
<p>
              I'm an admin, and want to change the power consumption vs. latency
              from cron scripts so it uses high latency during the night for
              maximum power saving, and low latency during business hours.
            </p>
<p>
            </p>
<p>
              I want high throughput when copying files, but want low throughput
              for downloading updates in the background.
            </p>
<p>
            </p>
<p>
              I want my power manager to set all latencies to lowest when on
              AC power.
            </p>
<p>
            </p>
<p>
              I don't want my users messing with latency settings.
            </p>
<p>
            </p>
<p>
              I'm and admin and I want to be able to override all latency
              settings on my machines.
            </p>
<p>
          
        
        </p>
<p>
          Why don't applications use the PMQoS interface directly?
          By providing a framework we can override requests by policy, and also
          control requests from random services.
          You also can't set latencies unless you're the root user, which is not
          suitable for the desktop use case.
        </p>
<p>
        </p>
<p>
          Of course, you can do if you really want, but then you loose the
          benefits of the query interface and the policy override,
          and have to run your application as root.
        </p>
<p>
      
    </p>
</div>
<div class="refsect1" title="Details">
<a name="id2814492"></a><h2>Details</h2>
<div class="refsect2" title="SetMinimumLatency ()">
<a name="id2814500"></a><h3>
<a name="QoS.SetMinimumLatency"></a>SetMinimumLatency ()</h3>
<pre class="programlisting">SetMinimumLatency (in  's' type,
                   in  'i' value)</pre>
</div>
<p>
            Set the minimum acceptable latency of the system.
            Setting this value tells the system to not attempt latencies below this setting.
            This may be useful in a data center or server room, when you want to override the
            latency requests from applications.
            This may be required if the server room is operating outside a standard thermal
            or power envelope, and an override is required.
            You do not have to use this method during normal operation.
          </p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>type</code></em>:</span></p></td>
<td>
            The type of latency to control, <code class="literal">cpu_dma</code> or
            <code class="literal">network</code>.
          </td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>value</code></em>:</span></p></td>
<td>
            The value, in microseconds or kilobits per second.
            The value <code class="literal">-1</code> means unset and the default is used.
          </td>
</tr>
</tbody>
</table></div>
<div class="refsect3" title="Errors">
<a name="id2811167"></a><h4>Errors</h4>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>org.freedesktop.UPower.GeneralError</code></em>:</span></p></td>
<td>if an error occured while setting the latency</td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3" title="Permissions">
<a name="id2811185"></a><h4>Permissions</h4>
<p class="permission">Callers need the <code class="literal">org.freedesktop.upower.qos.set-minimum-latency</code> authorization</p>
</div>
<hr>
<div class="refsect2" title="RequestLatency ()">
<a name="id2811200"></a><h3>
<a name="QoS.RequestLatency"></a>RequestLatency ()</h3>
<pre class="programlisting">RequestLatency (in  's' type,
                in  'i' value,
                in  'b' persistent,
                out 'u' cookie)</pre>
</div>
<p>
            Set the required latency of an application or service.
          </p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>type</code></em>:</span></p></td>
<td>
            The type of latency to control, <code class="literal">cpu_dma</code> or
            <code class="literal">network</code>.
          </td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>value</code></em>:</span></p></td>
<td>
            The value, in microseconds or kilobits per second.
            The value <code class="literal">-1</code> means remove all latency requirements.
          </td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>persistent</code></em>:</span></p></td>
<td>
            If the latency request outlives the connection.
            When the application issuing the request disconnects from the system
            bus, the latency request is automatically cleaned up.
            By setting this flag to TRUE, the request is not cleaned up when
            the client disconnects, and the cookie is preserved acress reboots.
          </td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>cookie</code></em>:</span></p></td>
<td>
            A cookie that identifies the request. This allows an application or
            service to request multiple latency settings from one process, and for
            other processes to cancel requests.
          </td>
</tr>
</tbody>
</table></div>
<div class="refsect3" title="Errors">
<a name="id2784484"></a><h4>Errors</h4>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>org.freedesktop.UPower.GeneralError</code></em>:</span></p></td>
<td>if an error occured while setting the latency</td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3" title="Permissions">
<a name="id2784504"></a><h4>Permissions</h4>
<p class="permission">
          Callers need the
          <code class="literal">org.freedesktop.upower.qos.request-latency-persistent</code>
          authorization if <code class="literal">persistent</code> is TRUE, or
          <code class="literal">org.freedesktop.upower.qos.request-latency</code> otherwise.
        </p>
</div>
<hr>
<div class="refsect2" title="CancelRequest ()">
<a name="id2784530"></a><h3>
<a name="QoS.CancelRequest"></a>CancelRequest ()</h3>
<pre class="programlisting">CancelRequest (in  's' type,
               in  'u' cookie)</pre>
</div>
<p>
            Cancel the latency request from the application or service.
          </p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>type</code></em>:</span></p></td>
<td>
            The type of latency to control, <code class="literal">cpu_dma</code> or
            <code class="literal">network</code>.
          </td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>cookie</code></em>:</span></p></td>
<td>
            A cookie that identifies the request. This allows an application or
            serivice to request multiple latency settings from one process.
          </td>
</tr>
</tbody>
</table></div>
<div class="refsect3" title="Errors">
<a name="id2784602"></a><h4>Errors</h4>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>org.freedesktop.UPower.GeneralError</code></em>:</span></p></td>
<td>if an error occured while clearing the latency</td>
</tr></tbody>
</table></div>
</div>
<div class="refsect3" title="Permissions">
<a name="id2784622"></a><h4>Permissions</h4>
<p class="permission">
          Callers need the
          <code class="literal">org.freedesktop.upower.qos.cancel-request</code>
          authorization if they were not the one issuing the request.
        </p>
</div>
<hr>
<div class="refsect2" title="GetLatency ()">
<a name="id2784636"></a><h3>
<a name="QoS.GetLatency"></a>GetLatency ()</h3>
<pre class="programlisting">GetLatency (in  's' type,
            out 'i' value)</pre>
</div>
<p>
            Get the lowest latency state on the system at the current time.
          </p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>type</code></em>:</span></p></td>
<td>
            The type of latency to return, <code class="literal">cpu_dma</code> or
            <code class="literal">network</code>.
          </td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>value</code></em>:</span></p></td>
<td>
            The value, in microseconds or kilobits per second.
            The value <code class="literal">-1</code> means not set or unavailable.
          </td>
</tr>
</tbody>
</table></div>
<div class="refsect3" title="Errors">
<a name="id2824872"></a><h4>Errors</h4>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>org.freedesktop.UPower.GeneralError</code></em>:</span></p></td>
<td>if an error occured while getting the latency</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" title="GetLatencyRequests ()">
<a name="id2824890"></a><h3>
<a name="QoS.GetLatencyRequests"></a>GetLatencyRequests ()</h3>
<pre class="programlisting">GetLatencyRequests (out 'a(uuusxbssi)' requests)</pre>
</div>
<p>
            Gets all the system requests from all services and applications.
          </p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>requests</code></em>:</span></p></td>
<td>
            The request lists, where each application can request different
            latency types.
            <div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem">
<span class="bold"><strong>cookie: </strong></span>
                  The random cookie that identifies the request.
                </li>
<li class="listitem">
<span class="bold"><strong>uid: </strong></span>
                  The user ID that issued the request.
                </li>
<li class="listitem">
<span class="bold"><strong>pid: </strong></span>
                  The process ID of the application.
                </li>
<li class="listitem">
<span class="bold"><strong>exec: </strong></span>
                  The executable that issued the request.
                </li>
<li class="listitem">
<span class="bold"><strong>timespec: </strong></span>
                  The number of seconds since the epoch.
                </li>
<li class="listitem">
<span class="bold"><strong>persistent: </strong></span>
                  If the request is persistent and outlives the connection lifetime.
                </li>
<li class="listitem">
<span class="bold"><strong>type: </strong></span>
                  The type of the request, <code class="literal">cpu_dma</code> or
                  <code class="literal">network</code>.
                </li>
<li class="listitem">
<span class="bold"><strong>value: </strong></span>
                  The value, in microseconds or kilobits per second.
                </li>
</ul></div>
        </td>
</tr></tbody>
</table></div>
</div>
<div class="refsect1" title="Signal Details">
<a name="id2825018"></a><h2>Signal Details</h2>
<div class="refsect2" title="The LatencyChanged signal">
<a name="id2825026"></a><h3>
<a name="QoS::LatencyChanged"></a>The LatencyChanged signal</h3>
<pre class="programlisting">LatencyChanged ('s' type,
                'i' value)</pre>
</div>
<p>
            Some latency value has changed.
          </p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>type</code></em>:</span></p></td>
<td>
            The type of latency that changed, cpu_dma or
            network.
          </td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>value</code></em>:</span></p></td>
<td>
            The value, in microseconds or kilobits per second.
            The value -1 means not set or unavailable.
          </td>
</tr>
</tbody>
</table></div>
<hr>
<div class="refsect2" title="The RequestsChanged signal">
<a name="id2825085"></a><h3>
<a name="QoS::RequestsChanged"></a>The RequestsChanged signal</h3>
<pre class="programlisting">RequestsChanged ()</pre>
</div>
<p>
            The latency requests on the system have changed.
          </p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody></tbody>
</table></div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.15</div>
</body>
</html>